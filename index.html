<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>λ©”μΈ νμ΄μ§€ | WELL WASHING</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="popup.css">
    <link rel="stylesheet" href="footer.css">
</head>
<body>
    <!-- π€ ν—¤λ” λ΅λ“ -->
    <header id="header"></header>

    <main class="dark-overlay-main">
        <img src="src/images/logo.png" alt="WELL WASHING Logo" class="popup-logo">
        <h1>μΆ‹μ€ μ¥λΉ„ + μΆ‹μ€ κ΄€λ¦¬ = μΆ‹μ€ μ„Έμ°¨</h1>
        <p>
            μ›°μ›μ‹±μ€ λ‹¨μν• μ„Έμ°¨ μ„¤λΉ„λ¥Ό λ„μ–΄, <br />
            κ³ κ°μ—κ² μµκ³ μ μ„Έμ°¨ κ²½ν—μ„ μ κ³µν•λ” κ²ƒμ„ λ©ν‘λ΅ ν•©λ‹λ‹¤. <br />
            κΈ°μ λ ¥κ³Ό κ΄€λ¦¬ μ‹μ¤ν…μ μ°¨μ΄κ°€, μ„Έμ°¨ ν’μ§μ μ°¨μ΄λ¥Ό λ§λ“­λ‹λ‹¤.
        </p>
    </main>

    <!-- π€ ν‘Έν„° λ΅λ“ -->
    <footer id="footer"></footer>

    <!-- β… νμ—… μ‚¬μ© μ—¬λ¶€ μ„¤μ • -->
    <script>
        const USE_POPUP = true; // β† νμ—… μ‚¬μ© μ—¬λ¶€ μ μ–΄: true λλ” false
    </script>

    <script>
        // π€ fetch()λ¥Ό μ‚¬μ©ν•μ—¬ header.htmlκ³Ό footer.htmlμ„ λ™μ μΌλ΅ λ¶λ¬μ¤κΈ°
        async function loadComponent(id, url) {
            try {
                const response = await fetch(url, { cache: "no-cache" });  // π”¥ μΊμ‹± λ¬Έμ  λ°©μ§€
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }
                const html = await response.text();
                document.getElementById(id).innerHTML = html;
            } catch (error) {
                console.error(`π¨ ${url} λ΅λ”© μ¤‘ μ¤λ¥ λ°μƒ:`, error);
            }
        }

        // π€ ν—¤λ” & ν‘Έν„°λ¥Ό λ¨Όμ € λ΅λ“ν• ν›„ μ΅°κ±΄λ¶€λ΅ νμ—… μ‹¤ν–‰
        Promise.all([
            loadComponent("header", "header.html"),
            loadComponent("footer", "footer.html")
        ]).then(() => {
            console.log("π€ ν—¤λ” & ν‘Έν„° λ΅λ”© μ™„λ£!");

            if (typeof USE_POPUP !== "undefined" && USE_POPUP) {
                console.log("β… νμ—… μ‹¤ν–‰ μ΅°κ±΄ μ¶©μ΅± β†’ popup.js λ΅λ“");
                loadPopupScript(); // π€ νμ—… μ¤ν¬λ¦½νΈ μ‹¤ν–‰
            } else {
                console.log("β νμ—… μ‹¤ν–‰ μ΅°κ±΄ λ―Έμ¶©μ΅± β†’ popup.js λ―Έλ΅λ“");
            }
        }).catch(error => {
            console.error("π¨ ν—¤λ”/ν‘Έν„° λ΅λ”© μ¤‘ μ¤λ¥ λ°μƒ!", error);
        });

        // π€ νμ—… JS λ™μ  λ΅λ“ ν•¨μ
        function loadPopupScript() {
            const script = document.createElement("script");
            script.src = "popup.js";
            script.defer = true;
            document.body.appendChild(script);
        }
    </script>
</body>
</html>
